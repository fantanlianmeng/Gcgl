<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>工程项目管理平台</title>
<link href="css/base-pc.css" rel="stylesheet" type="text/css">
<link href="lay/css/layui.css" rel="stylesheet"/>
<link href="css/module.css" rel="stylesheet" type="text/css">
<link href="css/select2.css" rel="stylesheet" type="text/css">
<link href="css/jedate.css" rel="stylesheet" type="text/css">
<link href="css/out.css" rel="stylesheet" type="text/css">
<link href="css/operation.css" rel="stylesheet" type="text/css">
</head>

<body class="p-r">
    <div id="header"></div>
    <div id="sidebar"></div>
    <div id="notice"></div>
    
    <div class="content filemanage">
    	<p class="crumbs">您当前的位置：运维管理 &gt; <a href="operation-plan.html">运维计划</a></p>
      	 
         <!--运维计划-->
         <div class="operation-plan">
         	<p class="add-nav fs-14 c-f ta-l">运维计划</p>
            <form action="">
            	<div class="plan-box fs-12 c-6 ta-c">
                	<div class="plan-classify">
                    	<span class="plan-span d-ib">项目名称：</span>
                        <select class="js-select370 select-normal city" name="worktype2">
                            <option>请选择</option>
                            <option>请选择</option>
                        </select>
                    </div>
                    <div class="plan-classify">
                    	<span class="plan-span d-ib">客户名称：</span>
                        <input type="text" value="自动选择" class="genre fs-12 c-9 ta-c" readonly>
                        &nbsp&nbsp&nbsp
                        <span class="plan-span d-ib">产品类型：</span>
                        <input type="text" value="自动选择" class="genre fs-12 c-9 ta-c" readonly>
                    </div>
                    <div class="plan-classify">
                    	<span class="plan-span d-ib">拟派运维人员：</span>
                        <a href="javascript:;" class="add-personnel d-ib ta-c">添加人员</a>
                    </div>
                    <div class="plan-classify">
                    	<span class="plan-span d-ib">运维类型：</span>
                        <div class="operation-type d-ib">
                            <label><span class="active d-ib ta-r c-9">故障运维</span><input name="Fruit" type="radio" value="" class="d-n" checked/></label>
                            <label><span class="d-ib ta-r c-9">例行运维</span><input name="Fruit" type="radio" value="" class="d-n"/></label>
                        </div>
                        <div class="batch d-ib">
                        	<span>运维批次：</span>
                             <input type="text" value="2" class="batch-input fs-12 c-9 ta-c">
                        </div>
                    </div>
                    <div class="plan-classify">
                    	<span class="plan-span d-ib">计划开始时间：</span>
                        <input id="inpstart" name="time1" type="text" value="" placeholder="请选择" readonly>
                        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <span class="plan-span d-ib">计划结束时间：</span>
                        <input id="inpend" name="time1" type="text" value="" placeholder="请选择" readonly>
                    </div>
                    
                    <div class="plan-table">
                    	<div class="nodelist fs-12 c-f p-r">
                        	<span class="d-ib f-l">站点列表</span>
                            <a href="javascript:;" class="plussite-a d-ib ta-c f-r">添加运维站点</a>
                            <div class="c-b"></div>
                        </div>
                        <table cellspacing="1" cellpadding="0" class="fs-12 w">
                            <tbody>
                                <tr class="c-6">
                                    <th>序号</th>
                                    <th>站点名称</th>
                                    <th>操作</th>
                                </tr>
                                <tr class="c-9">
                                    <td>1</td>
                                    <td>站点名称站点名称站点名称站点名称</td>
                                    <td><a href="javascript:;" class="d-ib">删除</a></td>
                                </tr>
                                <tr class="c-9">
                                    <td>2</td>
                                    <td>站点名称站点名称站点名称站点名称</td>
                                    <td><a href="javascript:;" class="d-ib">删除</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <a href="javascript:;" class="add-submit d-ib ta-c fs-14">保存</a>
                </div>
            </form>
         </div>
    </div>
	
    <div class="mask p-f d-n"></div>
    <!--添加人员-->
    <div class="out-people bg-f p-f d-n" id="out-people">
    	<h5 class="fs-14 c-f ta-c">添加人员</h5>
        <div class="check-name">
        	<span class="f-l">人员菜单：</span>
            <span class="f-r">全选</span>
            <input type="checkbox" class="f-r d-n checkall" id="check-all">
            <label for="check-all" class="f-r"></label>
            <div class="c-b"></div>
        </div>
        <ul id="demo"></ul>
        <div class="opt ta-c fs-14 ta-c">
        	<a href="#" class="cancel d-ib">取消</a>
            <a href="#" class="keep d-ib">保存</a>
        </div>
    </div>
    
    <!--添加运维站点-->
    <div class="plus-site bg-f p-f fs-12 c-6 d-n" id="plus-site">
    	<h5 class="fs-14 c-f ta-c">添加运维站点</h5>
        <p class="site-name">站点名称：&nbsp&nbsp&nbsp <span class="c-9">新一代E区</span></p>
        <div class="exist">
        	<span class="d-ib">已存在的站点：</span>
            <div class="all-check d-ib">
            	<input type="checkbox" class="checksite d-n" id="check-site">
                <label for="check-site" class=""></label>
                <span>全选</span>
            </div>
            <span class="selected-span d-ib">已选择站点<span id="number">1</span>个</span>
        </div>
        <div class="choose-site c-9">
        	<div class="choosebox d-ib">
                <input type="checkbox" class="checksite d-n" id="site1">
                <label for="site1" class=""></label>
                <span>新一代E区</span>
            </div>
            <div class="choosebox d-ib">
                <input type="checkbox" class="checksite d-n" id="site2">
                <label for="site2" class=""></label>
                <span>新一代E区</span>
            </div>
            <div class="choosebox d-ib">
                <input type="checkbox" class="checksite d-n" id="site3">
                <label for="site3" class=""></label>
                <span>新一代E区</span>
            </div>
            <div class="choosebox d-ib">
                <input type="checkbox" class="checksite d-n" id="site4">
                <label for="site4" class=""></label>
                <span>新一代E区</span>
            </div>
        </div>
        <div class="opt ta-c fs-14 ta-c">
        	<a href="#" class="cancel d-ib">取消</a>
            <a href="#" class="keep d-ib">保存</a>
        </div>
    </div>
    
    
</body>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script src="js/select2.js"></script>
<script src="js/select2_option.js"></script>
<script src="js/jquery.jedate.js"></script>
<script src="layui.js"></script>
<script>
	$(document).ready(function(){
        $("#header").load('header.html');
        $("#sidebar").load('sidebar.html',function(){
			$("#operation").addClass('active').next(".subnav").show();
			$("#operation-plan").addClass('subnav-active');
		});
        $("#notice").load('notice.html');
    });
	
	
	$(".operation-type label").click(function(){
		var checkaone = $(".operation-type label").find("input").prop("checked");
		if( checkaone == true ){
			$(".operation-type label span").removeClass("active")
			$(this).find("span").addClass("active");
		}
	})
	//添加人员
	$(".add-personnel").click(function(){
		$(".mask,#out-people").show();
	})
	$(".plussite-a").click(function(){
		$(".mask,#plus-site").show();
	})
	$(".cancel,.keep").click(function(){
		$(".mask,#out-people,#plus-site").hide();
	})
	
	//添加运维站点
	function check_le(){
		var check_length = $(".choosebox").find("input:checked").length
		$("#number").text(check_length)
	}
	check_le()
	$(".all-check label").click(function(){
		$(".choose-site").find("input").attr("checked",true);
		check_le()
	})
	$(".choosebox label").click(function(){
var check_length = $(".choosebox").find("input:checked").length
		$("#number").text(check_length)
		var checkall_demo = $(".choosebox").find(":checkbox").prop("checked");
		if( checkall == true ){//选中
			alert(1)
			$(".all-check").find("input").attr("checked",true);
		}

	})


	//实现日期选择联动
	var start = {
		format: 'YYYY-MM-DD',
		choosefun: function(elem,datas){
			end.minDate = datas; //开始日选好后，重置结束日的最小日期
			endDates();
		}
	};
	var end = {
		format: 'YYYY-MM-DD',
		choosefun: function(elem,datas){
			start.maxDate = datas; //将结束日的初始值设定为开始日的最大日期
		}
	};
	function endDates() {
		end.trigger = false;
		$("#inpend").jeDate(end);
	}
	$("#inpstart").jeDate(start);
	$("#inpend").jeDate(end);
</script>
<script>
	layui.use('tree', function() {
				var tree = layui.tree({
					elem: '#demo', //指定元素，生成的树放到哪个元素上
					check: 'checkbox', //勾选风格
					skin: 'as', //设定皮肤
					drag: true,//点击每一项时是否生成提示信息
					checkboxName: 'aa[]',//复选框的name属性值
					checkboxStyle: "",//设置复选框的样式，必须为字符串，css样式怎么写就怎么写
					click: function(item) { //点击节点回调
						console.log("item")
					},
					onchange: function (){//当当前input发生变化后所执行的回调
						console.log(this);
					},
					nodes: [ //节点
						{
							name: '工程中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '产品中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '工程中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '产品中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '工程中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '产品中心', //节点名称
							checkboxValue: 0,//复选框的值
							spread: true, //是否是展开状态，true为展开状态
							checked: true,//复选框默认是否选中	
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2,
								checked: true  //复选框默认是否选中
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '工程中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						},{
							name: '产品中心', //节点名称
							checkboxValue: 0,//复选框的值
							data: {//为元素添加额外数据，即在元素上添加data-xxx="yyy"，可选
								nodeName: "工程中心",
								alias: "changyong"
							},
							children: [{
								name: '李一一',
								checkboxValue: 1
							}, {
								name: '李一一',
								checkboxValue: 2
							}, {
								name: '李一一',
								checkboxValue: 3
							}]
						}
					]
				});
	});
	$(".checkall").click(function(){
		var checkall = $(".checkall").prop("checked");
		var checkall_demo = $("#demo").find("input").prop("checked");
		if( checkall == true ){//选中
			$("#demo").find("input").attr("checked",true);
		}
	})
</script>
</html>
